### Get the Current User

Returns the information about the current user that is logged in.

- Require Authentication: true

- Request

- Method: GET
    - URL: /api/session
    - Body: none

- Successful Response when there is a logged in user

- Status Code: 200

- Headers:

- Content-Type: application/json

- Body:

  ```json
  {
    "user": {
      "id": 1,

      "firstName": "John",

      "lastName": "Smith",

      "email": "john.smith@gmail.com",

      "username": "JohnSmith"
    }
  }
  ```

- Successful Response when there is no logged in user

- Status Code: 200

- Headers:

- Content-Type: application/json

- Body:

  ```json
  {
    "user": null
  }
  ```

### Log In a User

Logs in a current user with valid credentials and returns the current user's

information.

- Require Authentication: false

- Request

- Method: POST

- URL: /api/session

- Headers:

- Content-Type: application/json

- Body:

  ```json
  {
    "email": "john.smith@gmail.com",

    "password": "secret password"
  }
  ```

- Successful Response

- Status Code: 200

- Headers:

- Content-Type: application/json

- Body:

  ```json
  {
    "user": {
      "id": 1,

      "firstName": "John",

      "lastName": "Smith",

      "email": "john.smith@gmail.com",

      "username": "JohnSmith"
    }
  }
  ```

- Error Response: Invalid credentials

- Status Code: 401

- Headers:

- Content-Type: application/json

- Body:

  ```json
  {
    "message": "Invalid credentials"
  }
  ```

- Error response: Body validation errors

- Status Code: 400

- Headers:

- Content-Type: application/json

- Body:

  ```json
  {
    "message": "Bad Request", // (or "Validation error" if generated by Sequelize),

    "errors": {
      "email": "Email is required",

      "password": "Password is required"
    }
  }
  ```

### Sign Up a User

Creates a new user, logs them in as the current user, and returns the current

user's information.

- Require Authentication: false

- Request

- Method: POST

- URL: /api/users

- Headers:

- Content-Type: application/json

- Body:

  ```json
  {
    "firstName": "John",

    "lastName": "Smith",

    "email": "john.smith@gmail.com",

    "username": "JohnSmith",

    "password": "secret password"
  }
  ```

- Successful Response

- Status Code: 200

- Headers:

- Content-Type: application/json

- Body:

  ```json
  {
    "user": {
      "id": 1,

      "firstName": "John",

      "lastName": "Smith",

      "email": "john.smith@gmail.com",

      "username": "JohnSmith"
    }
  }
  ```

- Error response: User already exists with the specified email

- Status Code: 500

- Headers:

- Content-Type: application/json

- Body:

  ```json
  {
    "message": "User already exists",

    "errors": {
      "email": "User with that email already exists"
    }
  }
  ```

- Error response: User already exists with the specified username

- Status Code: 500

- Headers:

- Content-Type: application/json

- Body:

  ```json
  {
    "message": "User already exists",

    "errors": {
      "username": "User with that username already exists"
    }
  }
  ```

- Error response: Body validation errors

- Status Code: 400

- Headers:

- Content-Type: application/json

- Body:

  ```json
  {
    "message": "Bad Request", // (or "Validation error" if generated by Sequelize),

    "errors": {
      "email": "Invalid email",

      "firstName": "First Name is required",

      "lastName": "Last Name is required"
    }
  }
  ```

## Servers

### Get all Servers

Returns all the servers.

- Require Authentication: false
- Request
  - Method: GET
  - URL: /api/servers
  - Body: none
- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

  ```json
  {
    "Servers": [
      {
        "id": 1,
        "name": "cool server",
        "image_url": "https://www.tinkeringmonkey.com/wp-content/uploads/2020/09/app-academy-closeup2-scaled.jpg",
        "private": false,
        "owner_id": 1
      }
    ]
  }
  ```

## Get all Servers joined or organized by the Current User

Returns all the Servers

- Require Authentication: true
- Request
  - Method: GET
  - URL: /api/servers/current
  - Body: none
- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

  ```json
  {
    "Servers": [
      {
        "id": 1,
        "name": "cool server",
        "image_url": "https://www.tinkeringmonkey.com/wp-content/uploads/2020/09/app-academy-closeup2-scaled.jpg",
        "private": false,
        "owner_id": 1
      }
    ]
  }
  ```

## Get details of a Server from an id

Returns the details of a server specified by its id

- Require Authentication: false
- Request
  - Method: GET
  - URL: /api/servers/current
  - Body: none
- Successful Response - Status Code: 200 - Headers: - Content-Type: application/json - Body:

  ```json
    {
    "id": 1,
    "name": "cool server",
    "image_url": "https://www.tinkeringmonkey.com/wp-content/uploads/2020/09/app-academy-closeup2-scaled.jpg",
    "private": false,
    "owner_id":1
      "Channels": [
      {
      "id": 1,
      "name": "image url",
      },
      ]
    }
  ```

- Error response: Couldn't find a Server with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body:

  ```json
    "message": "Server couldn't be found"
  ```

### Create a Server

Creates and returns a new server.

- Require Authentication: true
- Request - Method: POST - URL: /api/servers - Headers: - Content-Type: application/json - Body:

  ```json
  {
    "name": "cool server",
    "image_url": "https://www.tinkeringmonkey.com/wp-content/uploads/2020/09/app-academy-closeup2-scaled.jpg",
    "private": true
  }
  ```

- Successful Response

  - Status Code:201
  - Headers:
    - Content-Type: application/json
  - Body:

  ```json
  {
    "id": 1,
    "name": "cool server",
    "image_url": "https://www.tinkeringmonkey.com/wp-content/uploads/2020/09/app-academy-closeup2-scaled.jpg",
    "private": false,
    "owner_id": 1
  }
  ```

- Error Response: Body validation error - Status Code: 400 - Headers: - Content-Type: applictaion/json - Body:

  ```json
  {
    "message": "Bad Request",
    "errors": {
      "name": "Name must be 100 characters or less",
      "private": "Private must be a boolean"
    }
  }
  ```

### Edit a Server

Updates and returns an existing server.

- Require Authentication: true
- Require proper authentication: Server must belong to the current user
- Request
  - Method: PUT
  - URL: api/servers/<int:server_id>
  - Headers:
    - Content-Type: application/json
  - Body:

```json
{
  "name": "cool server2",
  "image_url": "https://www.tinkeringmonkey.com/wp-content/uploads/2020/09/app-academy-closeup2-scaled.jpg",
  "private": true
}
```

- Successful Response

  - Status Code:201
  - Headers:
    - Content-Type: application/json
  - Body:

  ```json
  {
    "id": 1,
    "name": "cool server",
    "image_url": "https://www.tinkeringmonkey.com/wp-content/uploads/2020/09/app-academy-closeup2-scaled.jpg",
    "private": false,
    "owner_id": 1
  }
  ```

- Error Response: Body validation error

  - Status Code: 400
  - Headers:
    - Content-Type: applictaion/json
  - Body:

  ```json
  {
    "message": "Bad Request",
    "errors": {
      "name": "Name must be 100 characters or less",
      "private": "Private must be a boolean"
    }
  }
  ```

- Error response: Couldn't find a Server with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body

  ```json
    "message": "Server couldn't be found"
  ```

### Delete a Server

Deletes an existing server.

- Require Authentication: true
- Require proper authentication: Server must belong to the current user
- Request
  - Method: DELETE
  - URL: /api/servers/<int:server_id>
  - Body: none
- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

  ```json
  {
    "message": "Server successfully deleted"
  }
  ```

- Error response: Couldn't find a Server with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body

  ```json
  {
    "message": "Server couldn't be found"
  }
  ```

### Get all messages in a channel by its ID

Returns the messages in a channel specified by its id.

- Require Authentication: true
- Request
  <!--!!START SILENT -->

  - Method: GET
  - URL: /api/channels/:channelId/messages
    <!--!!END -->
    <!--!!ADD -->
    <!-- * Method: ? -->
    <!-- * URL: ? -->
    <!--!!END_ADD -->
  - Body: none

- Successful Response: If you ARE logged in, you should see the selected server, associated channel, and messages on that channel for a public server.

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "messages": [
        {
          "content": "I am the best Comment you will ever see"
        },
        {
          "content": "I am the best Person to write stuff in here"
        },
        {
          "content": "Jimmy is a G"
        },
        {
          "content": "Brad please send me your Barbers number!"
        },
        {
          "content": "David please help Brad grow some hair!"
        }
      ]
    }
    ```

- Error response: Couldn't find a Channel with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Channel couldn't be found"
    }
    ```

- Error response: Server record is set to private

  - Status Code: 400
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Server is set to private"
    }
    ```

### Create a new Message for a Channel based on the Channel's ID

Post a new message in a channel specified by ID.

- Require Authentication: true
- Require Authorization: Current User must be a member of the server
- Request
  <!--!!START SILENT -->

  - Method: POST
  - URL: /api/channels/:channelId/messages
    <!--!!END -->
    <!--!!ADD -->
    <!-- * Method: ? -->
    <!-- * URL: ? -->
    <!--!!END_ADD -->
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "content": "This is a new message on the channel :)",
      "channel_id": 2,
      "owner_id": 3
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "This is a new message on the channel :)"
    }
    ```

- Error response: Couldn't find an Channel with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Channel couldn't be found"
    }
    ```

### Update a Message based on its ID

Edit a message specified by its ID.

- Require Authentication: true
- Require Authorization: Current User must be the creator of the message
- Request
  <!--!!START SILENT -->

  - Method: POST
  - URL: /api/channels/:channelId/messages
    <!--!!END -->
    <!--!!ADD -->
    <!-- * Method: ? -->
    <!-- * URL: ? -->
    <!--!!END_ADD -->
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "content": "This is an even newer message on the channel :|"
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "This is an even newer message on the channel :|"
    }
    ```

- Error response: Couldn't find an Channel with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Channel couldn't be found"
    }
    ```

- Error response: User id did not match the message's owner_id

  - Status Code: 400
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "User must be message author"
    }
    ```
